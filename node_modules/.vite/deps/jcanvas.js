import {
  require_jquery
} from "./chunk-NYLNFO6Q.js";
import {
  __toESM
} from "./chunk-V4OQ3NZ2.js";

// node_modules/jcanvas/dist/esm/jcanvas.min.js
var import_jquery = __toESM(require_jquery());
var A = Object.assign;
var W = import_jquery.default.inArray;
var D = function(i21) {
  return Object.prototype.toString.call(i21).slice(8, -1).toLowerCase();
};
var it = import_jquery.default.isPlainObject;
var _ = Math.PI;
var V = Math.round;
var Yt = Math.abs;
var P = Math.sin;
var S = Math.cos;
var At = Math.atan2;
var Dt = import_jquery.default.event.fix;
var M = { drawings: { arc: "drawArc", bezier: "drawBezier", ellipse: "drawEllipse", function: "draw", image: "drawImage", line: "drawLine", path: "drawPath", polygon: "drawPolygon", slice: "drawSlice", quadratic: "drawQuadratic", rectangle: "drawRect", text: "drawText", vector: "drawVector", save: "saveCanvas", restore: "restoreCanvas", rotate: "rotateCanvas", scale: "scaleCanvas", translate: "translateCanvas" }, touchEvents: { mousedown: "touchstart", mouseup: "touchend", mousemove: "touchmove" }, mouseEvents: { touchstart: "mousedown", touchend: "mouseup", touchmove: "mousemove" } };
var X = { dataCache: {}, propCache: {}, imageCache: {}, pathCache: {} };
var U = { rotate: 0, scaleX: 1, scaleY: 1, translateX: 0, translateY: 0, masks: [] };
var F = { props: ["width", "height", "opacity", "lineHeight"], propsObj: {} };
var Ht = ["mousedown", "mousemove", "mouseup", "mouseover", "mouseout", "touchstart", "touchmove", "touchend", "pointerdown", "pointermove", "pointerup"];
var Y = { events: {}, eventHooks: {}, future: {} };
var jt = class {
  constructor() {
    this.align = "center", this.arrowAngle = 90, this.arrowRadius = 0, this.autosave = true, this.baseline = "middle", this.bringToFront = false, this.canvas = null, this.ccw = false, this.closed = false, this.compositing = "source-over", this.concavity = 0, this.cornerRadius = 0, this.count = 1, this.cropFromCenter = true, this.crossOrigin = null, this.cursors = null, this.disableEvents = false, this.draggable = false, this.dragging = false, this.dragGroups = null, this.groups = null, this.d = null, this.data = null, this.dx = 0, this.dy = 0, this.end = 360, this.endArrow = false, this.eventX = null, this.eventY = null, this.fillRule = "nonzero", this.fillStyle = "transparent", this.flipArcText = false, this.fontStyle = "normal", this.fontSize = "12pt", this.fontFamily = "sans-serif", this.fromCenter = true, this.height = null, this.imageSmoothing = true, this.inDegrees = true, this.intangible = false, this.index = null, this.intersects = false, this.letterSpacing = null, this.lineHeight = 1, this.layer = false, this.mask = false, this.maxWidth = null, this.method = null, this.miterLimit = 10, this.name = null, this.opacity = 1, this.r1 = null, this.r2 = null, this.radius = 0, this.repeat = "repeat", this.respectAlign = false, this.restrictDragToAxis = null, this.rotate = 0, this.rounded = false, this.scale = 1, this.scaleX = 1, this.scaleY = 1, this.shadowBlur = 0, this.shadowColor = "transparent", this.shadowStroke = false, this.shadowX = 0, this.shadowY = 0, this.sHeight = null, this.sides = 0, this.source = "", this.spread = 0, this.start = 0, this.startArrow = false, this.strokeCap = "butt", this.strokeDash = null, this.strokeDashOffset = 0, this.strokeJoin = "miter", this.strokeStyle = "transparent", this.strokeWidth = 1, this.style = {}, this.sWidth = null, this.sx = null, this.sy = null, this.text = "", this.translate = 0, this.translateX = 0, this.translateY = 0, this.type = null, this.visible = true, this.width = null, this.willReadFrequently = false, this.x = 0, this.y = 0;
  }
};
var K = new jt();
var I = function(i21) {
  return A(this, i21);
};
I.prototype = K;
var Z = function(i21, e) {
  Object.assign(this, e, { canvas: i21, _layer: true });
};
Z.prototype = I.prototype;
function x(i21) {
  return (i21 == null ? void 0 : i21._layer) ? i21 : new I(i21);
}
function J(i21) {
  return D(i21) === "string";
}
function E(i21) {
  return D(i21) === "function";
}
function rt(i21) {
  return !isNaN(Number(i21)) && !isNaN(parseFloat(i21));
}
function p(i21) {
  return i21 instanceof HTMLCanvasElement;
}
function m(i21) {
  return import_jquery.default.jCanvas.defaults.willReadFrequently ? i21.getContext("2d", { willReadFrequently: import_jquery.default.jCanvas.defaults.willReadFrequently }) : i21.getContext("2d");
}
function $(i21) {
  for (const e in i21) if (Object.prototype.hasOwnProperty.call(i21, e)) {
    const t = i21[e];
    D(t) === "string" && rt(t) && e !== "text" && (i21[e] = parseFloat(String(t)));
  }
  i21.text !== void 0 && (i21.text = String(i21.text));
}
function q(i21) {
  return i21 = A({}, i21), i21.masks = i21.masks.slice(0), i21;
}
function N(i21, e) {
  i21.save();
  const t = q(e.transforms);
  e.savedTransforms.push(t);
}
function Et(i21, e) {
  if (e.savedTransforms.length === 0) e.transforms = q(U);
  else {
    i21.restore();
    const t = e.savedTransforms.pop();
    t && (e.transforms = t);
  }
}
function at(i21, e, t, n) {
  const o = t[n];
  o && (E(o) ? e[n] = o.call(i21, t) : e[n] = o);
}
function k(i21, e, t) {
  at(i21, e, t, "fillStyle"), at(i21, e, t, "strokeStyle"), e.lineWidth = t.strokeWidth, t.rounded ? e.lineCap = e.lineJoin = "round" : (e.lineCap = t.strokeCap, e.lineJoin = t.strokeJoin, e.miterLimit = t.miterLimit), t.strokeDash || (t.strokeDash = []), e.setLineDash && e.setLineDash(t.strokeDash), e.webkitLineDash = t.strokeDash, e.lineDashOffset = e.webkitLineDashOffset = e.mozDashOffset = t.strokeDashOffset, e.shadowOffsetX = t.shadowX, e.shadowOffsetY = t.shadowY, e.shadowBlur = t.shadowBlur, e.shadowColor = t.shadowColor, e.globalAlpha = t.opacity, e.globalCompositeOperation = t.compositing, t.imageSmoothing && (e.imageSmoothingEnabled = t.imageSmoothing);
}
function lt(i21, e, t) {
  t.mask && (t.autosave && N(i21, e), t._path ? i21.clip(t._path, t.fillRule) : i21.clip(t.fillRule), e.transforms.masks.push(t._args));
}
function Q(i21, e) {
  e._transformed && i21.restore();
}
function O(i21, e, t) {
  if (t.closed && e.closePath(), t.shadowStroke && t.strokeWidth !== 0 ? (t._path ? (e.stroke(t._path), e.fill(t._path, t.fillRule)) : (e.stroke(), e.fill(t.fillRule)), e.shadowColor = "transparent", e.shadowBlur = 0, t._path ? e.stroke(t._path) : e.stroke()) : (t._path ? e.fill(t._path, t.fillRule) : e.fill(t.fillRule), t.fillStyle !== "transparent" && (e.shadowColor = "transparent"), t.strokeWidth !== 0 && (t._path ? e.stroke(t._path) : e.stroke())), t.closed || e.closePath(), Q(e, t), t.mask) {
    const n = v(i21);
    lt(e, n, t);
  }
}
function L(i21, e, t, n = null, o = null) {
  t._toRad = t.inDegrees ? _ / 180 : 1, t._transformed = true, e.save(), !t.fromCenter && !t._centered && n !== null && o !== null && (o === void 0 && (o = n), t.x += n / 2, t.y += o / 2, t._centered = true), t.rotate && yt(e, t, null), (t.scale !== 1 || t.scaleX !== 1 || t.scaleY !== 1) && mt(e, t, null), (t.translate || t.translateX || t.translateY) && vt(e, t, null);
}
Y.extend = function(i21) {
  return i21.name && (i21.props && A(K, i21.props), import_jquery.default.fn[i21.name] = function e(t) {
    const n = this;
    for (let o = 0; o < n.length; o += 1) {
      const r = n[o];
      if (!p(r)) continue;
      const s = m(r);
      if (!s) continue;
      const a = x(t);
      w(r, a, t, e), k(r, s, a), i21.fn.call(r, s, a);
    }
    return n;
  }, i21.type && (M.drawings[i21.type] = i21.name)), import_jquery.default.fn[i21.name];
};
var Wt = class {
  constructor(e) {
    this.layers = [], this.layer = { names: {}, groups: {} }, this.eventHooks = {}, this.intersecting = [], this.lastIntersected = null, this.drag = { layer: null, dragging: false }, this.event = { type: null, x: null, y: null }, this.events = {}, this.savedTransforms = [], this.animating = false, this.animated = null, this.pixelRatio = 1, this.scaled = false, this.redrawOnMousemove = false, this.originalRedrawOnMousemove = false, this.canvas = e, this.cursor = (0, import_jquery.default)(e).css("cursor"), this.transforms = q(U);
  }
};
function v(i21) {
  const e = X.dataCache;
  let t;
  return e._canvas === i21 && e._data ? t = e._data : (t = import_jquery.default.data(i21, "jCanvas"), t || (t = new Wt(i21), import_jquery.default.data(i21, "jCanvas", t)), e._canvas = i21, e._data = t), t;
}
function ct(i21, e, t) {
  var _a;
  for (const n in Y.events) Object.prototype.hasOwnProperty.call(Y.events, n) && (t[n] || ((_a = t.cursors) == null ? void 0 : _a[n])) && Mt(i21, e, t, n);
  e.events.mouseout || (i21.on("mouseout.jCanvas", function() {
    let n = false;
    const o = e.drag.layer;
    o && (e.drag = { layer: null, dragging: false }, b(i21, e, o, "dragcancel"), n = true);
    for (let r = 0; r < e.layers.length; r += 1) t = e.layers[r], (t == null ? void 0 : t._hovered) && (i21.triggerLayerEvent(e.layers[r], "mouseout"), n = true);
    n && i21.drawLayers();
  }), e.events.mouseout = true);
}
function ut(i21, e, t, n) {
  Y.events[n](i21, e), t._event = true;
}
function Mt(i21, e, t, n) {
  ut(i21, e, t, n), (n === "mouseover" || n === "mouseout" || n === "mousemove") && (e.redrawOnMousemove = true);
}
function ht(i21, e, t) {
  if (t.draggable || t.cursors) {
    const n = ["mousedown", "mousemove", "mouseup"];
    for (let o = 0; o < n.length; o += 1) {
      const r = n[o];
      ut(i21, e, t, r);
    }
    t._event = true;
  }
}
function tt(i21, e, t) {
  const n = i21.layer.names;
  t ? t.name !== void 0 && J(e.name) && e.name !== t.name && delete n[e.name] : t = e, J(t.name) && (n[t.name] = e);
}
function et(i21, e, t) {
  const n = i21.layer.groups;
  let o;
  if (!t) t = e;
  else if (t.groups !== void 0 && e.groups !== null) for (let r = 0; r < e.groups.length; r += 1) {
    const s = e.groups[r], a = n[s];
    if (a) {
      for (let l = 0; l < a.length; l += 1) if (a[l] === e) {
        o = l, a.splice(l, 1);
        break;
      }
      a.length === 0 && delete n[s];
    }
  }
  if (t.groups !== void 0 && t.groups !== null) for (let r = 0; r < t.groups.length; r += 1) {
    const s = t.groups[r];
    let a = n[s];
    a || (a = n[s] = []), o === void 0 && (o = a.length), a.splice(o, 0, e);
  }
}
import_jquery.default.fn.getEventHooks = function() {
  const i21 = this;
  if (i21.length !== 0) {
    const e = i21[0];
    return p(e) ? v(e).eventHooks : {};
  }
  return {};
}, import_jquery.default.fn.setEventHooks = function(i21) {
  const e = this;
  for (let t = 0; t < e.length; t += 1) {
    const n = e[t];
    if (!p(n)) continue;
    const o = v(n);
    A(o.eventHooks, i21);
  }
  return e;
}, import_jquery.default.fn.getLayers = function(i21) {
  const e = this;
  let t = [];
  if (e.length !== 0) {
    const n = e[0];
    if (!p(n)) return t;
    const o = v(n).layers;
    if (E(i21)) for (let r = 0; r < o.length; r += 1) {
      const s = o[r];
      i21.call(n, s) && t.push(s);
    }
    else t = o;
  }
  return t;
}, import_jquery.default.fn.getLayer = function(i21) {
  const e = this;
  if (e.length !== 0) {
    const t = e[0];
    if (!p(t)) return;
    const n = v(t), o = n.layers, r = D(i21);
    if (i21 && typeof i21 == "object" && "layer" in i21 && i21.layer) return i21;
    if (r === "number") {
      let s = i21;
      return s < 0 && (s = o.length + s), o[s];
    } else if (r === "regexp") {
      const s = i21;
      for (let a = 0; a < o.length; a += 1) {
        const l = o[a];
        if (J(l.name) && l.name.match(s)) return l;
      }
    } else {
      const s = i21;
      return n.layer.names[s];
    }
  }
}, import_jquery.default.fn.getLayerGroup = function(i21) {
  const e = this, t = D(i21);
  if (e.length !== 0) {
    const n = e[0];
    if (!p(n)) return;
    if (t === "array") return i21;
    if (t === "regexp") {
      const o = i21, r = v(n).layer.groups;
      for (const s in r) if (s.match(o)) return r[s];
    } else if (typeof i21 == "string") {
      const o = i21;
      return v(n).layer.groups[o];
    }
  }
}, import_jquery.default.fn.getLayerIndex = function(i21) {
  const e = this, t = e.getLayers(), n = e.getLayer(i21);
  return W(n, t);
}, import_jquery.default.fn.setLayer = function(i21, e) {
  const t = this;
  for (let n = 0; n < t.length; n += 1) {
    const o = t[n];
    if (!p(o)) continue;
    const r = (0, import_jquery.default)(o), s = v(o), a = (0, import_jquery.default)(t[n]).getLayer(i21);
    if (a) {
      tt(s, a, e), et(s, a, e), $(e);
      for (const l in e) if (Object.prototype.hasOwnProperty.call(e, l)) {
        const u = e[l], f = D(u);
        f === "object" && it(u) ? (a[l] = A({}, u), $(a[l])) : f === "array" ? a[l] = u.slice(0) : f === "string" ? u.indexOf("+=") === 0 ? a[l] += parseFloat(u.substr(2)) : u.indexOf("-=") === 0 ? a[l] -= parseFloat(u.substr(2)) : !isNaN(u) && rt(u) && l !== "text" ? a[l] = parseFloat(String(u)) : a[l] = u : a[l] = u;
      }
      ct(r, s, a), ht(r, s, a), import_jquery.default.isEmptyObject(e) === false && b(r, s, a, "change", e);
    }
  }
  return t;
}, import_jquery.default.fn.setLayers = function(i21, e) {
  const t = this;
  for (let n = 0; n < t.length; n += 1) {
    const o = (0, import_jquery.default)(t[n]), r = o.getLayers(e);
    for (let s = 0; s < r.length; s += 1) o.setLayer(r[s], i21);
  }
  return t;
}, import_jquery.default.fn.setLayerGroup = function(i21, e) {
  const t = this;
  for (let n = 0; n < t.length; n += 1) {
    const o = (0, import_jquery.default)(t[n]), r = o.getLayerGroup(i21);
    if (r) for (let s = 0; s < r.length; s += 1) o.setLayer(r[s], e);
  }
  return t;
}, import_jquery.default.fn.moveLayer = function(i21, e) {
  const t = this;
  for (let n = 0; n < t.length; n += 1) {
    const o = t[n];
    if (!p(o)) continue;
    const r = (0, import_jquery.default)(o), s = v(o), a = s.layers, l = r.getLayer(i21);
    l && (l.index = W(l, a), a.splice(l.index, 1), a.splice(e, 0, l), e < 0 && (e = a.length + e), l.index = e, b(r, s, l, "move"));
  }
  return t;
}, import_jquery.default.fn.removeLayer = function(i21) {
  const e = this;
  for (let t = 0; t < e.length; t += 1) {
    const n = e[t];
    if (!p(n)) continue;
    const o = (0, import_jquery.default)(n), r = v(n), s = o.getLayers(), a = o.getLayer(i21);
    a && (a.index = W(a, s), s.splice(a.index, 1), delete a._layer, tt(r, a, { name: null }), et(r, a, { groups: null }), b(o, r, a, "remove"));
  }
  return e;
}, import_jquery.default.fn.removeLayers = function(i21) {
  const e = this;
  for (let t = 0; t < e.length; t += 1) {
    const n = e[t];
    if (!p(n)) continue;
    const o = (0, import_jquery.default)(n), r = v(n), s = o.getLayers(i21).slice(0);
    for (let a = 0; a < s.length; a += 1) o.removeLayer(s[a]);
    r.layer.names = {}, r.layer.groups = {};
  }
  return e;
}, import_jquery.default.fn.removeLayerGroup = function(i21) {
  const e = this;
  if (i21 !== void 0) for (let t = 0; t < e.length; t += 1) {
    const n = (0, import_jquery.default)(e[t]);
    let o = n.getLayerGroup(i21);
    if (o) {
      o = o.slice(0);
      for (let r = 0; r < o.length; r += 1) n.removeLayer(o[r]);
    }
  }
  return e;
}, import_jquery.default.fn.addLayerToGroup = function(i21, e) {
  const t = this;
  let n = [e];
  for (let o = 0; o < t.length; o += 1) {
    const r = (0, import_jquery.default)(t[o]), s = r.getLayer(i21);
    (s == null ? void 0 : s.groups) && (n = s.groups.slice(0), W(e, s.groups) === -1 && n.push(e)), r.setLayer(s, { groups: n });
  }
  return t;
}, import_jquery.default.fn.removeLayerFromGroup = function(i21, e) {
  const t = this;
  for (let n = 0; n < t.length; n += 1) {
    const o = (0, import_jquery.default)(t[n]), r = o.getLayer(i21);
    if (r == null ? void 0 : r.groups) {
      const s = W(e, r.groups);
      if (s !== -1) {
        const a = r.groups.slice(0);
        a.splice(s, 1), o.setLayer(r, { groups: a });
      }
    }
  }
  return t;
};
function Ft(i21) {
  let e = null, t;
  for (let n = i21.intersecting.length - 1; n >= 0; n -= 1) if (e = i21.intersecting[n], e._masks) {
    for (let o = e._masks.length - 1; o >= 0; o -= 1) if (t = e._masks[o], !t.intersects) {
      e.intersects = false;
      break;
    }
    if (e.intersects && !e.intangible) break;
  }
  return (e == null ? void 0 : e.intangible) && (e = null), e;
}
function ft(i21, e, t) {
  var _a;
  e.visible && e._method && (e._next = t || null, (_a = e._method) == null ? void 0 : _a.call(i21, e));
}
function It(i21, e, t) {
  const n = e.drag, o = n.layer, r = (o == null ? void 0 : o.dragGroups) || [], s = e.layers;
  if (t === "mousemove" || t === "touchmove") {
    if (n.dragging || (n.dragging = true, o.dragging = true, o.bringToFront && o.index !== null && (s.splice(o.index, 1), o.index = s.push(o)), o._startX = o.x, o._startY = o.y, o._endX = o._eventX, o._endY = o._eventY, b(i21, e, o, "dragstart")), n.dragging) {
      let a = o._eventX - (o._endX - o._startX), l = o._eventY - (o._endY - o._startY);
      o.updateDragX && (a = o.updateDragX.call(i21[0], o, a)), o.updateDragY && (l = o.updateDragY.call(i21[0], o, l)), o.dx = a - o.x, o.dy = l - o.y, o.restrictDragToAxis !== "y" && (o.x = a), o.restrictDragToAxis !== "x" && (o.y = l), b(i21, e, o, "drag");
      for (let u = 0; u < r.length; u += 1) {
        const f = r[u], c = e.layer.groups[f];
        if (o.groups && c) for (let d = 0; d < c.length; d += 1) c[d] !== o && (o.restrictDragToAxis !== "y" && c[d].restrictDragToAxis !== "y" && (c[d].x += o.dx), o.restrictDragToAxis !== "x" && c[d].restrictDragToAxis !== "x" && (c[d].y += o.dy));
      }
    }
  } else (t === "mouseup" || t === "touchend") && (n.dragging && (o.dragging = false, n.dragging = false, e.redrawOnMousemove = e.originalRedrawOnMousemove, b(i21, e, o, "dragstop")), e.drag = { layer: null, dragging: false });
}
function zt(i21, e, t) {
  let n;
  e.cursors && (n = e.cursors[t]), n && i21.css({ cursor: n });
}
function dt(i21, e) {
  i21.css({ cursor: e.cursor });
}
function nt(i21, e, t, n, o) {
  n[t] && e._running && !e._running[t] && (e._running[t] = true, n[t].call(i21[0], e, o), e._running[t] = false);
}
function Gt(i21, e) {
  return !i21.disableEvents && (!i21.intangible || W(e, Ht) === -1);
}
function b(i21, e, t, n, o) {
  Gt(t, n) && (n !== "mouseout" && zt(i21, t, n), nt(i21, t, n, t, o), nt(i21, t, n, e.eventHooks, o), nt(i21, t, n, Y.eventHooks, o));
}
import_jquery.default.fn.triggerLayerEvent = function(i21, e) {
  const t = this;
  for (let n = 0; n < t.length; n += 1) {
    const o = t[n];
    if (!p(o)) continue;
    const r = (0, import_jquery.default)(o), s = v(o), a = r.getLayer(i21);
    a && b(r, s, a, e);
  }
  return t;
}, import_jquery.default.fn.drawLayer = function(i21) {
  const e = this;
  for (let t = 0; t < e.length; t += 1) {
    const n = (0, import_jquery.default)(e[t]), o = e[t];
    if (!p(o) || !m(o)) continue;
    const r = n.getLayer(i21);
    r && ft(n, r);
  }
  return e;
}, import_jquery.default.fn.drawLayers = function(i21) {
  const e = this, t = i21 || {};
  let n = false;
  const o = t.index || 0;
  for (let r = 0; r < e.length; r += 1) {
    const s = e[r];
    if (!p(s)) continue;
    const a = (0, import_jquery.default)(s);
    if (!m(s)) continue;
    const l = v(s);
    t.clear !== false && a.clearCanvas(), t.complete && (l.drawLayersComplete = t.complete);
    const u = l.layers;
    let f;
    for (f = o; f < u.length; f += 1) {
      const C = u[f];
      if (C.index = f, t.resetFire && (C._fired = false), ft(a, C, f + 1), C._masks = l.transforms.masks.slice(0), C._method === import_jquery.default.fn.drawImage && C.visible) {
        n = true;
        break;
      }
    }
    if (n) continue;
    const c = f;
    t.complete && (t.complete.call(e[r]), delete l.drawLayersComplete);
    const d = Ft(l), y = l.event;
    let g = y.type;
    l.drag.layer && g && It(a, l, g);
    const T = l.lastIntersected;
    T !== null && d !== T && T._hovered && !T._fired && !l.drag.dragging && (l.lastIntersected = null, T._fired = true, T._hovered = false, b(a, l, T, "mouseout"), dt(a, l)), d && g && (d[g] || (g = Ut(g)), d._event && d.intersects && (l.lastIntersected = d, (d.mouseover || d.mouseout || d.cursors) && !l.drag.dragging && !d._hovered && !d._fired && (d._fired = true, d._hovered = true, b(a, l, d, "mouseover")), d._fired || (d._fired = true, y.type = null, b(a, l, d, g)), d.draggable && !d.disableEvents && (g === "mousedown" || g === "touchstart") && (l.drag.layer = d, l.originalRedrawOnMousemove = l.redrawOnMousemove, l.redrawOnMousemove = true)), d === null && !l.drag.dragging && dt(a, l), c === u.length && (l.intersecting.length = 0, l.transforms = q(U), l.savedTransforms.length = 0));
  }
  return e;
};
function w(i21, e, t, n) {
  const o = e._layer ? t : e;
  if (e._args = t, (e.draggable || e.dragGroups) && (e.layer = true, e.draggable = true), e._method || (n ? e._method = n : e.method ? e._method = import_jquery.default.fn[e.method] : e.type && (e._method = import_jquery.default.fn[M.drawings[e.type]])), e.layer && !e._layer && o) {
    const r = (0, import_jquery.default)(i21), s = v(i21), a = s.layers;
    if (o.name === null || J(o.name) && s.layer.names[o.name] === void 0) {
      $(e);
      const l = new Z(i21, e);
      return l.canvas = i21, l.layer = true, l._layer = true, l._running = {}, l.data !== null ? l.data = A({}, l.data) : l.data = {}, l.groups ? l.groups = l.groups.slice(0) : l.groups = [], tt(s, l), et(s, l), ct(r, s, l), ht(r, s, l), e._event = l._event, l._method === import_jquery.default.fn.drawText && r.measureText(l), l.index === null && (l.index = a.length), a.splice(l.index, 0, l), e._args = l, b(r, s, l, "add"), l;
    }
  } else e.layer || $(e);
  return o;
}
import_jquery.default.fn.addLayer = function(i21) {
  const e = this;
  for (let t = 0; t < e.length; t += 1) {
    const n = e[t];
    if (!p(n) || !m(n)) continue;
    const o = x(i21);
    o.layer = true, w(n, o, i21);
  }
  return e;
};
function Nt(i21) {
  for (let e = 0; e < F.props.length; e += 1) {
    const t = F.props[e];
    i21[t] = i21["_" + t];
  }
}
function gt(i21, e) {
  for (let t = 0; t < F.props.length; t += 1) {
    const n = F.props[t];
    i21[n] !== void 0 && (i21["_" + n] = i21[n], F.propsObj[n] = true, e && delete i21[n]);
  }
}
function Bt(i21, e, t) {
  for (const n in t) if (Object.prototype.hasOwnProperty.call(t, n)) {
    const o = t[n];
    if (E(o) && (t[n] = o.call(i21, e, n)), D(o) === "object" && it(o)) {
      for (const r in o) if (Object.prototype.hasOwnProperty.call(o, r)) {
        const s = o[r];
        e[n] !== void 0 && (e[n + "." + r] = e[n][r], t[n + "." + r] = s);
      }
      delete t[n];
    }
  }
  return t;
}
function Jt(i21) {
  for (const e in i21) Object.prototype.hasOwnProperty.call(i21, e) && e.indexOf(".") !== -1 && delete i21[e];
}
function $t(i21) {
  if (i21 === "transparent") return "rgba(0, 0, 0, 0)";
  if (i21.match(/^([a-z]+|#[0-9a-f]+)$/gi)) {
    const e = document.head, t = e.style.color;
    e.style.color = i21;
    const n = import_jquery.default.css(e, "color");
    return e.style.color = t, n;
  } else return i21;
}
function pt(i21) {
  const e = $t(i21);
  if (/^rgb/gi.test(e)) {
    const t = e.match(/(\d+(\.\d+)?)/gi) || [], n = /%/gi.test(e) ? 2.55 : 1;
    return [Number(t[0]) * n, Number(t[1]) * n, Number(t[2]) * n, t[3] ? Number(t[3]) * n : 1];
  } else return console.error(`Color format unsupported: ${e}`), [];
}
function qt(i21, e, t) {
  const [n, o, r, s] = pt(i21), [a, l, u, f] = pt(e), c = V(n + (a - n) * t), d = V(o + (l - o) * t), y = V(r + (u - r) * t), g = s + (f - s) * t;
  return `rgba(${c}, ${d}, ${y}, ${g})`;
}
import_jquery.default.fn.animateLayer = function(...i21) {
  const e = this;
  if (!i21.length) return e;
  D(i21[2]) === "object" ? (i21.splice(2, 0, i21[2].duration || null), i21.splice(3, 0, i21[3].easing || null), i21.splice(4, 0, i21[4].complete || null), i21.splice(5, 0, i21[5].step || null)) : (i21[2] === void 0 ? (i21.splice(2, 0, null), i21.splice(3, 0, null), i21.splice(4, 0, null)) : E(i21[2]) && (i21.splice(2, 0, null), i21.splice(3, 0, null)), i21[3] === void 0 ? (i21[3] = null, i21.splice(4, 0, null)) : E(i21[3]) && i21.splice(3, 0, null));
  function t(o, r, s) {
    return function() {
      Nt(s), Jt(s), (!r.animating || r.animated === s) && o.drawLayers(), s._animating = false, r.animating = false, r.animated = null, i21[4] && i21[4].call(o[0], s), b(o, r, s, "animateend");
    };
  }
  function n(o, r, s) {
    return function(a, l) {
      let u, f, c, d = false;
      l.prop[0] === "_" && (d = true, l.prop = l.prop.replace("_", ""), s[l.prop] = s["_" + l.prop]), l.prop.indexOf(".") !== -1 && (u = l.prop.split("."), f = u[0], c = u[1], s[f] && (s[f][c] = l.now)), s._pos !== l.pos && (s._pos = l.pos, !s._animating && !r.animating && (s._animating = true, r.animating = true, r.animated = s), (!r.animating || r.animated === s) && o.drawLayers()), i21[5] && i21[5].call(o[0], a, l, s), b(o, r, s, "animate", l), d && (l.prop = "_" + l.prop);
    };
  }
  for (let o = 0; o < e.length; o += 1) {
    const r = e[o];
    if (!p(r)) continue;
    const s = (0, import_jquery.default)(r);
    if (!m(r)) continue;
    const a = v(r), l = s.getLayer(i21[0]);
    if (l && l._method !== import_jquery.default.fn.draw) {
      const u = Bt(r, l, A({}, i21[1]));
      gt(u, true), gt(l), l.style = F.propsObj, (0, import_jquery.default)(l).animate(u, { duration: i21[2], easing: import_jquery.default.easing[i21[3]] ? i21[3] : null, complete: t(s, a, l), step: n(s, a, l) }), b(s, a, l, "animatestart");
    }
  }
  return e;
}, import_jquery.default.fn.animateLayerGroup = function(i21, e, ...t) {
  const n = this;
  for (let o = 0; o < n.length; o += 1) {
    const r = (0, import_jquery.default)(n[o]), s = r.getLayerGroup(i21);
    if (s) for (let a = 0; a < s.length; a += 1) t[0] = s[a], r.animateLayer.apply(r, [e, ...t]);
  }
  return n;
}, import_jquery.default.fn.delayLayer = function(i21, e) {
  const t = this;
  for (let n = 0; n < t.length; n += 1) {
    const o = t[n];
    if (!p(o)) continue;
    const r = (0, import_jquery.default)(o), s = v(o), a = r.getLayer(i21);
    a && ((0, import_jquery.default)(a).delay(e || 0), b(r, s, a, "delay"));
  }
  return t;
}, import_jquery.default.fn.delayLayerGroup = function(i21, e) {
  const t = this;
  for (let n = 0; n < t.length; n += 1) {
    const o = (0, import_jquery.default)(t[n]), r = o.getLayerGroup(i21);
    if (r) for (let s = 0; s < r.length; s += 1) o.delayLayer(r[s], e || 0);
  }
  return t;
}, import_jquery.default.fn.stopLayer = function(i21, e) {
  const t = this;
  for (let n = 0; n < t.length; n += 1) {
    const o = t[n];
    if (!p(o)) continue;
    const r = (0, import_jquery.default)(o), s = v(o), a = r.getLayer(i21);
    a && ((0, import_jquery.default)(a).stop(e), b(r, s, a, "stop"));
  }
  return t;
}, import_jquery.default.fn.stopLayerGroup = function(i21, e) {
  const t = this;
  for (let n = 0; n < t.length; n += 1) {
    const o = (0, import_jquery.default)(t[n]), r = o.getLayerGroup(i21);
    if (r) for (let s = 0; s < r.length; s += 1) {
      const a = r[s];
      o.stopLayer(a, e);
    }
  }
  return t;
};
function Qt(i21) {
  for (let e = 0; e < i21.length; e += 1) import_jquery.default.Tween.propHooks[i21[e]] = { get: function(t) {
    return t.elem[t.prop];
  }, set: function(t) {
    t.elem[t.prop] = qt(t.start, t.end, t.pos || 0);
  } };
}
Qt(["color", "backgroundColor", "borderColor", "borderTopColor", "borderRightColor", "borderBottomColor", "borderLeftColor", "fillStyle", "outlineColor", "strokeStyle", "shadowColor"]);
function Vt(i21) {
  return M.touchEvents[i21] || i21;
}
function Ut(i21) {
  return M.mouseEvents[i21] || i21;
}
function Kt(i21) {
  Y.events[i21] = function(e, t) {
    const n = t.event, o = i21 === "mouseover" || i21 === "mouseout" ? "mousemove" : i21, r = Vt(o);
    function s(a) {
      n.x = a.offsetX, n.y = a.offsetY, n.type = o, n.event = a, (a.type !== "mousemove" || t.redrawOnMousemove || t.drag.dragging) && e.drawLayers({ resetFire: true }), a.preventDefault();
    }
    t.events[o] || (r !== o ? e.on(o + ".jCanvas " + r + ".jCanvas", s) : e.on(o + ".jCanvas", s), t.events[o] = true);
  };
}
function Zt(i21) {
  for (let e = 0; e < i21.length; e += 1) Kt(i21[e]);
}
Zt(["click", "dblclick", "mousedown", "mouseup", "mousemove", "mouseover", "mouseout", "touchstart", "touchmove", "touchend", "pointerdown", "pointermove", "pointerup", "contextmenu"]);
function R(i21, e, t) {
  const n = t._args;
  if (n) {
    const o = v(i21), r = o.event;
    let s = false, a, l;
    r.x !== null && r.y !== null && (a = r.x * o.pixelRatio, l = r.y * o.pixelRatio, n._path ? s = e.isPointInPath(n._path, a, l) || e.isPointInStroke(n._path, a, l) : s = e.isPointInPath(a, l) || e.isPointInStroke(a, l));
    const u = o.transforms;
    n.eventX = r.x, n.eventY = r.y, n.event = r.event;
    const f = o.transforms.rotate;
    a = n.eventX, l = n.eventY, f !== 0 ? (n._eventX = a * S(-f) - l * P(-f), n._eventY = l * S(-f) + a * P(-f)) : (n._eventX = a, n._eventY = l), n._eventX /= u.scaleX, n._eventY /= u.scaleY, s && o.intersecting.push(n), n.intersects = !!s;
  }
}
import_jquery.default.event.fix = function(i21) {
  i21 = Dt.call(import_jquery.default.event, i21);
  const e = i21.originalEvent;
  if (e) {
    const t = e.changedTouches;
    let n;
    if (i21.pageX !== void 0 && i21.offsetX === void 0) try {
      n = (0, import_jquery.default)(i21.currentTarget).offset(), n && (i21.offsetX = i21.pageX - n.left, i21.offsetY = i21.pageY - n.top);
    } catch {
    }
    else if (t) try {
      n = (0, import_jquery.default)(i21.currentTarget).offset(), n && (i21.offsetX = t[0].pageX - n.left, i21.offsetY = t[0].pageY - n.top);
    } catch {
    }
  }
  return i21;
}, import_jquery.default.fn.draw = function i(e) {
  const t = this, n = x(e), o = import_jquery.default.fn[M.drawings[n.type]];
  if (n.type && M.drawings[n.type] && E(o)) o.call(t, e);
  else for (let r = 0; r < t.length; r += 1) {
    const s = t[r];
    if (!p(s)) continue;
    const a = m(s);
    if (!a) continue;
    const l = x(e);
    w(s, l, e, i), l.visible && l.fn && l.fn.call(t[r], a, l);
  }
  return t;
}, import_jquery.default.fn.clearCanvas = function i2(e) {
  const t = this, n = x(e);
  for (let o = 0; o < t.length; o += 1) {
    const r = t[o];
    if (!p(r)) continue;
    const s = m(r);
    s && (n.width === null || n.height === null ? (s.save(), s.setTransform(1, 0, 0, 1, 0, 0), s.clearRect(0, 0, r.width, r.height), s.restore()) : (w(r, n, e, i2), L(r, s, n, n.width, n.height), s.clearRect(n.x - n.width / 2, n.y - n.height / 2, n.width, n.height), Q(s, n)));
  }
  return t;
}, import_jquery.default.fn.saveCanvas = function i3(e) {
  const t = this;
  for (let n = 0; n < t.length; n += 1) {
    const o = t[n];
    if (!p(o)) continue;
    const r = m(o);
    if (!r) continue;
    const s = v(o), a = x(e);
    w(o, a, e, i3);
    for (let l = 0; l < a.count; l += 1) N(r, s);
  }
  return t;
}, import_jquery.default.fn.restoreCanvas = function i4(e) {
  const t = this;
  for (let n = 0; n < t.length; n += 1) {
    const o = t[n];
    if (!p(o)) continue;
    const r = m(o);
    if (!r) continue;
    const s = v(o), a = x(e);
    w(o, a, e, i4);
    for (let l = 0; l < a.count; l += 1) Et(r, s);
  }
  return t;
};
function yt(i21, e, t) {
  e._toRad = e.inDegrees ? _ / 180 : 1, i21.translate(e.x, e.y), i21.rotate(e.rotate * e._toRad), i21.translate(-e.x, -e.y), t && (t.rotate += e.rotate * e._toRad);
}
function mt(i21, e, t) {
  e.scale !== 1 && (e.scaleX = e.scaleY = e.scale), i21.translate(e.x, e.y), i21.scale(e.scaleX, e.scaleY), i21.translate(-e.x, -e.y), t && (t.scaleX *= e.scaleX, t.scaleY *= e.scaleY);
}
function vt(i21, e, t) {
  e.translate && (e.translateX = e.translateY = e.translate), i21.translate(e.translateX, e.translateY), t && (t.translateX += e.translateX, t.translateY += e.translateY);
}
import_jquery.default.fn.rotateCanvas = function i5(e) {
  const t = this;
  for (let n = 0; n < t.length; n += 1) {
    const o = t[n];
    if (!p(o)) continue;
    const r = m(o);
    if (!r) continue;
    const s = v(o), a = x(e);
    w(o, a, e, i5), a.autosave && N(r, s), yt(r, a, s.transforms);
  }
  return t;
}, import_jquery.default.fn.scaleCanvas = function i6(e) {
  const t = this;
  for (let n = 0; n < t.length; n += 1) {
    const o = t[n];
    if (!p(o)) continue;
    const r = m(o);
    if (!r) continue;
    const s = v(o), a = x(e);
    w(o, a, e, i6), a.autosave && N(r, s), mt(r, a, s.transforms);
  }
  return t;
}, import_jquery.default.fn.translateCanvas = function i7(e) {
  const t = this;
  for (let n = 0; n < t.length; n += 1) {
    const o = t[n];
    if (!p(o)) continue;
    const r = m(o);
    if (!r) continue;
    const s = v(o), a = x(e);
    w(o, a, e, i7), a.autosave && N(r, s), vt(r, a, s.transforms);
  }
  return t;
}, import_jquery.default.fn.drawRect = function i8(e) {
  const t = this;
  for (let n = 0; n < t.length; n += 1) {
    const o = t[n];
    if (!p(o)) continue;
    const r = m(o);
    if (!r) continue;
    const s = x(e);
    if (w(o, s, e, i8), !s.visible) continue;
    L(o, r, s, s.width, s.height), k(o, r, s);
    const a = s.width || 0, l = s.height || 0;
    r.beginPath();
    const u = s.x - a / 2, f = s.y - l / 2, c = Yt(s.cornerRadius);
    c ? r.roundRect(u, f, a, l, c) : r.rect(u, f, a, l), R(o, r, s), O(o, r, s);
  }
  return t;
};
function xt(i21) {
  for (; i21 < 0; ) i21 += 2 * _;
  return i21;
}
function H(i21, e, t) {
  return i21 + e * S(t);
}
function j(i21, e, t) {
  return i21 + e * P(t);
}
function wt(i21, e) {
  const t = i21 === e ? 0 : i21.x, n = i21 === e ? 0 : i21.y, o = e.ccw ? -_ / 180 : _ / 180, r = e.x + t, s = e.y + n, a = e.start * i21._toRad - _ / 2, l = !e.inDegrees && e.end === 360 ? _ * 2 : e.end * i21._toRad - _ / 2;
  return { pathX: r, pathY: s, angleDiff: o, pathStartAngle: a, pathEndAngle: l };
}
function _t(i21, e, t, n) {
  const { pathX: o, pathY: r, angleDiff: s, pathStartAngle: a, pathEndAngle: l } = wt(t, n), u = H(o, n.radius, a + s), f = j(r, n.radius, a + s), c = H(o, n.radius, a), d = j(r, n.radius, a);
  z(i21, e, t, n, u, f, c, d), e.arc(o, r, n.radius, a, l, n.ccw);
  const y = H(o, n.radius, l + s), g = j(r, n.radius, l + s), T = H(o, n.radius, l), C = j(r, n.radius, l);
  G(i21, e, t, n, T, C, y, g);
}
function bt(i21, e, t, n) {
  const { pathX: o, pathY: r, angleDiff: s, pathStartAngle: a, pathEndAngle: l } = wt(t, n), u = n.width || 0, f = n.height || 0, c = H(o, u / 2, a + s), d = j(r, f / 2, a + s), y = H(o, u / 2, a), g = j(r, f / 2, a);
  z(i21, e, t, n, c, d, y, g), e.ellipse(o, r, u / 2, f / 2, 0, a, l, n.ccw);
  const T = H(o, u / 2, l + s), C = j(r, f / 2, l + s), B = H(o, u / 2, l), Xt = j(r, f / 2, l);
  G(i21, e, t, n, B, Xt, T, C);
}
import_jquery.default.fn.drawArc = function i9(e) {
  const t = this;
  for (let n = 0; n < t.length; n += 1) {
    const o = t[n];
    if (!p(o)) continue;
    const r = m(o);
    if (!r) continue;
    const s = x(e);
    w(o, s, e, i9), s.visible && (L(o, r, s, s.radius * 2), k(o, r, s), r.beginPath(), _t(o, r, s, s), R(o, r, s), O(o, r, s));
  }
  return t;
}, import_jquery.default.fn.drawEllipse = function i10(e) {
  const t = this;
  for (let n = 0; n < t.length; n += 1) {
    const o = t[n];
    if (!p(o)) continue;
    const r = m(o);
    if (!r) continue;
    const s = x(e);
    w(o, s, e, i10), s.visible && (L(o, r, s, s.width, s.height), k(o, r, s), r.beginPath(), bt(o, r, s, s), R(o, r, s), O(o, r, s));
  }
  return t;
}, import_jquery.default.fn.drawPolygon = function i11(e) {
  const t = this;
  for (let n = 0; n < t.length; n += 1) {
    const o = t[n];
    if (!p(o)) continue;
    const r = m(o);
    if (!r) continue;
    const s = x(e);
    if (w(o, s, e, i11), !s.visible) continue;
    L(o, r, s, s.radius * 2), k(o, r, s);
    const a = 2 * _ / s.sides, l = a / 2;
    let u = l + _ / 2;
    const f = s.radius * S(l);
    r.beginPath();
    for (let c = 0; c < s.sides; c += 1) {
      let d = s.x + s.radius * S(u), y = s.y + s.radius * P(u);
      r.lineTo(d, y), s.concavity && (d = s.x + (f + -f * s.concavity) * S(u + l), y = s.y + (f + -f * s.concavity) * P(u + l), r.lineTo(d, y)), u += a;
    }
    R(o, r, s), s.closed = true, O(o, r, s);
  }
  return t;
}, import_jquery.default.fn.drawSlice = function i12(e) {
  const t = this;
  for (let n = 0; n < t.length; n += 1) {
    const o = t[n];
    if (!p(o)) continue;
    const r = m(o);
    if (!r) continue;
    const s = x(e);
    if (w(o, s, e, i12), !s.visible) continue;
    L(o, r, s, s.radius * 2), k(o, r, s), s.start *= s._toRad, s.end *= s._toRad, s.start -= _ / 2, s.end -= _ / 2, s.start = xt(s.start), s.end = xt(s.end), s.end < s.start && (s.end += 2 * _);
    const a = (s.start + s.end) / 2, l = s.radius * s.spread * S(a), u = s.radius * s.spread * P(a);
    s.x += l, s.y += u, r.beginPath(), r.arc(s.x, s.y, s.radius, s.start, s.end, s.ccw), r.lineTo(s.x, s.y), R(o, r, s), s.closed = true, O(o, r, s);
  }
  return t;
};
function Lt(i21, e, t, n, o, r, s, a) {
  if (n.arrowRadius && !t.closed) {
    let l = At(a - r, s - o);
    l -= _;
    const u = t.strokeWidth * S(l), f = t.strokeWidth * P(l), c = s + n.arrowRadius * S(l + n.arrowAngle / 2), d = a + n.arrowRadius * P(l + n.arrowAngle / 2), y = s + n.arrowRadius * S(l - n.arrowAngle / 2), g = a + n.arrowRadius * P(l - n.arrowAngle / 2);
    e.moveTo(c - u, d - f), e.lineTo(s - u, a - f), e.lineTo(y - u, g - f), e.moveTo(s - u, a - f), e.lineTo(s + u, a + f), e.moveTo(s, a);
  }
}
function z(i21, e, t, n, o, r, s, a) {
  n._arrowAngleConverted || (n.arrowAngle *= t._toRad, n._arrowAngleConverted = true), n.startArrow && Lt(i21, e, t, n, o, r, s, a);
}
function G(i21, e, t, n, o, r, s, a) {
  n._arrowAngleConverted || (n.arrowAngle *= t._toRad, n._arrowAngleConverted = true), n.endArrow && Lt(i21, e, t, n, o, r, s, a);
}
function Ct(i21, e, t, n) {
  let o = 2;
  for (z(i21, e, t, n, n.x2 + t.x, n.y2 + t.y, n.x1 + t.x, n.y1 + t.y), n.x1 !== void 0 && n.y1 !== void 0 && e.moveTo(n.x1 + t.x, n.y1 + t.y); ; ) {
    const r = n["x" + o], s = n["y" + o];
    if (r !== void 0 && s !== void 0) e.lineTo(r + t.x, s + t.y), o += 1;
    else break;
  }
  o -= 1, G(i21, e, t, n, n["x" + (o - 1)] + t.x, n["y" + (o - 1)] + t.y, n["x" + o] + t.x, n["y" + o] + t.y);
}
import_jquery.default.fn.drawLine = function i13(e) {
  const t = this;
  for (let n = 0; n < t.length; n += 1) {
    const o = t[n];
    if (!p(o)) continue;
    const r = m(o);
    if (!r) continue;
    const s = x(e);
    w(o, s, e, i13), s.visible && (L(o, r, s), k(o, r, s), r.beginPath(), Ct(o, r, s, s), R(o, r, s), O(o, r, s));
  }
  return t;
};
function kt(i21, e, t, n) {
  let o = 2;
  for (z(i21, e, t, n, n.cx1 + t.x, n.cy1 + t.y, n.x1 + t.x, n.y1 + t.y), n.x1 !== void 0 && n.y1 !== void 0 && e.moveTo(n.x1 + t.x, n.y1 + t.y); ; ) {
    const r = n["x" + o], s = n["y" + o], a = n["cx" + (o - 1)], l = n["cy" + (o - 1)];
    if (r !== void 0 && s !== void 0 && a !== void 0 && l !== void 0) e.quadraticCurveTo(a + t.x, l + t.y, r + t.x, s + t.y), o += 1;
    else break;
  }
  o -= 1, G(i21, e, t, n, n["cx" + (o - 1)] + t.x, n["cy" + (o - 1)] + t.y, n["x" + o] + t.x, n["y" + o] + t.y);
}
import_jquery.default.fn.drawQuadratic = function i14(e) {
  const t = this;
  for (let n = 0; n < t.length; n += 1) {
    const o = t[n];
    if (!p(o)) continue;
    const r = m(o);
    if (!r) continue;
    const s = x(e);
    w(o, s, e, i14), s.visible && (L(o, r, s), k(o, r, s), r.beginPath(), kt(o, r, s, s), R(o, r, s), O(o, r, s));
  }
  return t;
};
function Tt(i21, e, t, n) {
  let o = 2, r = 1;
  for (z(i21, e, t, n, n.cx1 + t.x, n.cy1 + t.y, n.x1 + t.x, n.y1 + t.y), n.x1 !== void 0 && n.y1 !== void 0 && e.moveTo(n.x1 + t.x, n.y1 + t.y); ; ) {
    const s = n["x" + o], a = n["y" + o], l = n["cx" + r], u = n["cy" + r], f = n["cx" + (r + 1)], c = n["cy" + (r + 1)];
    if (s !== void 0 && a !== void 0 && l !== void 0 && u !== void 0 && f !== void 0 && c !== void 0) e.bezierCurveTo(l + t.x, u + t.y, f + t.x, c + t.y, s + t.x, a + t.y), o += 1, r += 2;
    else break;
  }
  o -= 1, r -= 2, G(i21, e, t, n, n["cx" + (r + 1)] + t.x, n["cy" + (r + 1)] + t.y, n["x" + o] + t.x, n["y" + o] + t.y);
}
import_jquery.default.fn.drawBezier = function i15(e) {
  const t = this;
  for (let n = 0; n < t.length; n += 1) {
    const o = t[n];
    if (!p(o)) continue;
    const r = m(o);
    if (!r) continue;
    const s = x(e);
    w(o, s, e, i15), s.visible && (L(o, r, s), k(o, r, s), r.beginPath(), Tt(o, r, s, s), R(o, r, s), O(o, r, s));
  }
  return t;
};
function Rt(i21, e, t) {
  return e *= i21._toRad, e -= _ / 2, t * S(e);
}
function St(i21, e, t) {
  return e *= i21._toRad, e -= _ / 2, t * P(e);
}
function Ot(i21, e, t, n) {
  let o, r;
  t === n ? (o = 0, r = 0) : (o = t.x, r = t.y);
  let s = 1;
  const a = n.x + o;
  let l = a, u = a;
  const f = n.y + r;
  let c = f, d = f;
  for (z(i21, e, t, n, a + Rt(t, n.a1, n.l1), f + St(t, n.a1, n.l1), a, f), n.x !== void 0 && n.y !== void 0 && e.moveTo(a, f); ; ) {
    const y = n["a" + s], g = n["l" + s];
    if (y !== void 0 && g !== void 0) l = u, c = d, u += Rt(t, y, g), d += St(t, y, g), e.lineTo(u, d), s += 1;
    else break;
  }
  G(i21, e, t, n, l, c, u, d);
}
import_jquery.default.fn.drawVector = function i16(e) {
  const t = this;
  for (let n = 0; n < t.length; n += 1) {
    const o = t[n];
    if (!p(o)) continue;
    const r = m(o);
    if (!r) continue;
    const s = x(e);
    w(o, s, e, i16), s.visible && (L(o, r, s), k(o, r, s), r.beginPath(), Ot(o, r, s, s), R(o, r, s), O(o, r, s));
  }
  return t;
}, import_jquery.default.fn.drawPath = function i17(e) {
  const t = this;
  for (let n = 0; n < t.length; n += 1) {
    const o = t[n];
    if (!p(o)) continue;
    const r = m(o);
    if (!r) continue;
    const s = x(e);
    if (s.d && (r.translate(s.x, s.y), s._path = X.pathCache[s.d] || new Path2D(s.d), X.pathCache[s.d] = s._path), w(o, s, e, i17), !!s.visible) {
      if (L(o, r, s), k(o, r, s), !s.d) {
        r.beginPath();
        let a = 1;
        for (; ; ) {
          let l = s["p" + a];
          if (l !== void 0) l = new I(l), l.type === "line" ? Ct(o, r, s, l) : l.type === "quadratic" ? kt(o, r, s, l) : l.type === "bezier" ? Tt(o, r, s, l) : l.type === "vector" ? Ot(o, r, s, l) : l.type === "arc" ? _t(o, r, s, l) : l.type === "ellipse" && bt(o, r, s, l), a += 1;
          else break;
        }
      }
      R(o, r, s), O(o, r, s), s.d && r.translate(-s.x, -s.y);
    }
  }
  return t;
};
function ot(i21, e, t) {
  isNaN(Number(t.fontSize)) || (t.fontSize += "px"), e.font = t.fontStyle + " " + t.fontSize + " " + t.fontFamily;
}
function st(i21, e, t, n) {
  const o = X.propCache;
  if (o.width && o.height && o.text === t.text && o.fontStyle === t.fontStyle && o.fontSize === t.fontSize && o.fontFamily === t.fontFamily && o.maxWidth === t.maxWidth && o.lineHeight === t.lineHeight) t.width = o.width, t.height = o.height;
  else {
    t.width = e.measureText(n[0]).width;
    for (let s = 1; s < n.length; s += 1) {
      const a = e.measureText(n[s]).width;
      a > t.width && (t.width = a);
    }
    const r = i21.style.fontSize;
    i21.style.fontSize = t.fontSize, t.height = parseFloat(import_jquery.default.css(i21, "fontSize")) * n.length * t.lineHeight, i21.style.fontSize = r;
  }
}
function Pt(i21, e) {
  const t = String(e.text), n = e.maxWidth, o = t.split(`
`);
  let r = [];
  for (let s = 0; s < o.length; s += 1) {
    const a = o[s], l = a.split(" ");
    let u = [], f = "";
    if (l.length === 1 || n && i21.measureText(a).width < n) u = [a];
    else {
      for (let c = 0; c < l.length; c += 1) n && i21.measureText(f + l[c]).width > n && (f !== "" && u.push(f), f = ""), f += l[c], c !== l.length - 1 && (f += " ");
      u.push(f);
    }
    r = r.concat(u.join(`
`).replace(/((\n))|($)/gi, "$2").split(`
`));
  }
  return r;
}
import_jquery.default.fn.drawText = function i18(e) {
  const t = this, n = 500;
  for (let o = 0; o < t.length; o += 1) {
    const r = t[o];
    if (!p(r)) continue;
    const s = m(r);
    if (!s) continue;
    const a = x(e);
    if (w(r, a, e, i18), !a.visible) continue;
    s.textBaseline = a.baseline, s.textAlign = a.align, ot(r, s, a);
    let l;
    a.maxWidth !== null ? l = Pt(s, a) : l = a.text.toString().split(`
`), st(r, s, a, l), L(r, s, a, a.width, a.height), k(r, s, a);
    let u = a.x;
    if (a.align === "left" && a.width ? a.respectAlign ? a.x += a.width / 2 : u -= a.width / 2 : a.align === "right" && a.width && (a.respectAlign ? a.x -= a.width / 2 : u += a.width / 2), a.radius) {
      const c = parseFloat(a.fontSize);
      a.letterSpacing === null && (a.letterSpacing = c / n);
      for (let d = 0; d < l.length; d += 1) {
        s.save(), s.translate(a.x, a.y);
        let y = l[d], g;
        a.flipArcText && (g = y.split(""), g.reverse(), y = g.join(""));
        const T = y.length;
        s.rotate(-(_ * a.letterSpacing * (T - 1)) / 2);
        for (let C = 0; C < T; C += 1) {
          const B = y[C];
          C !== 0 && s.rotate(_ * a.letterSpacing), s.save(), s.translate(0, -a.radius), a.flipArcText && s.scale(-1, -1), s.fillText(B, 0, 0), a.fillStyle !== "transparent" && (s.shadowColor = "transparent"), a.strokeWidth !== 0 && s.strokeText(B, 0, 0), s.restore();
        }
        a.radius -= c, a.letterSpacing += c / (n * 2 * _), s.restore();
      }
    } else for (let c = 0; c < l.length; c += 1) {
      const d = l[c], y = a.y + c * (a.height || 0) / l.length - (l.length - 1) * (a.height || 0) / l.length / 2;
      s.shadowColor = a.shadowColor, s.fillText(d, u, y), a.fillStyle !== "transparent" && (s.shadowColor = "transparent"), a.strokeWidth !== 0 && s.strokeText(d, u, y);
    }
    let f = 0;
    if (a.baseline === "top" ? f += (a.height || 0) / 2 : a.baseline === "bottom" && (f -= (a.height || 0) / 2), a._event) {
      const c = a.width || 0, d = a.height || 0;
      s.beginPath(), s.rect(a.x - c / 2, a.y - d / 2 + f, c, d), R(r, s, a), s.closePath();
    }
    Q(s, a), a && (X.propCache = a);
  }
  return t;
}, import_jquery.default.fn.measureText = function(i21) {
  const e = this, t = e.getLayer(i21) || new I(i21), n = e[0];
  if (!p(n)) return t;
  const o = m(n);
  if (!o) return t;
  ot(n, o, t);
  let r;
  return t.maxWidth !== null ? r = Pt(o, t) : r = t.text.split(`
`), st(n, o, t, r), t;
}, import_jquery.default.fn.drawImage = function i19(e) {
  const t = this, n = X.imageCache;
  let o = null, r;
  function s(l, u, f, c, d) {
    if (!o) return;
    c.width === null && c.sWidth === null && (c.width = c.sWidth = o.width), c.height === null && c.sHeight === null && (c.height = c.sHeight = o.height), d && (d.width = c.width, d.height = c.height);
    const y = c.width || 0, g = c.height || 0;
    c.sWidth !== null && c.sHeight !== null && c.sx !== null && c.sy !== null ? (c.width === null && (c.width = c.sWidth), c.height === null && (c.height = c.sHeight), c.cropFromCenter && (c.sx += c.sWidth / 2, c.sy += c.sHeight / 2), c.sy - c.sHeight / 2 < 0 && (c.sy = c.sHeight / 2), c.sy + c.sHeight / 2 > o.height && (c.sy = o.height - c.sHeight / 2), c.sx - c.sWidth / 2 < 0 && (c.sx = c.sWidth / 2), c.sx + c.sWidth / 2 > o.width && (c.sx = o.width - c.sWidth / 2), L(l, u, c, c.width, c.height), k(l, u, c), u.drawImage(o, c.sx - c.sWidth / 2, c.sy - c.sHeight / 2, c.sWidth, c.sHeight, c.x - c.width / 2, c.y - c.height / 2, c.width, c.height)) : (L(l, u, c, c.width, c.height), k(l, u, c), u.drawImage(o, c.x - y / 2, c.y - g / 2, y, g)), u.beginPath(), u.rect(c.x - y / 2, c.y - g / 2, y, g), R(l, u, c), u.closePath(), Q(u, c), lt(u, f, c);
  }
  function a(l, u, f, c, d) {
    return function() {
      const y = (0, import_jquery.default)(l);
      if (s(l, u, f, c, d), c.layer && d instanceof Z ? b(y, f, d, "load") : c.load && c.load.call(y[0], d), c.layer && d && (d._masks = f.transforms.masks.slice(0), c._next)) {
        const g = f.drawLayersComplete;
        delete f.drawLayersComplete, y.drawLayers({ clear: false, resetFire: true, index: c._next, complete: g });
      }
    };
  }
  for (let l = 0; l < t.length; l += 1) {
    const u = t[l];
    if (!p(u)) continue;
    const f = m(u);
    if (!f) continue;
    const c = v(u), d = x(e), y = w(u, d, e, i19);
    if (d.visible) {
      if (r = d.source, r instanceof HTMLImageElement || r instanceof HTMLCanvasElement) o = r;
      else if (r) {
        const g = n[r];
        (g == null ? void 0 : g.complete) ? o = g : (o = new Image(), r.match(/^data:/i) || (o.crossOrigin = d.crossOrigin), o.src = r, n[r] = o);
      }
      o && (o instanceof HTMLImageElement && o.complete || o instanceof HTMLCanvasElement ? a(u, f, c, d, y)() : o.onload = a(u, f, c, d, y));
    }
  }
  return t;
}, import_jquery.default.fn.createPattern = function(i21) {
  const e = this;
  let t, n = null;
  function o(u, f) {
    n = u.createPattern(t, f.repeat), f.load && n && f.load.call(e[0], n);
  }
  const r = e[0];
  if (!p(r)) return null;
  const s = m(r);
  if (!s) return null;
  const a = x(i21), l = a.source;
  if (E(l)) {
    t = document.createElement("canvas"), t.width = a.width || 0, t.height = a.height || 0;
    const u = m(t);
    l.call(t, u), o(s, a);
  } else l instanceof HTMLImageElement || l instanceof HTMLCanvasElement ? t = l : (t = new Image(), l.match(/^data:/i) || (t.crossOrigin = a.crossOrigin), t.src = l), t instanceof HTMLImageElement && t.complete || t instanceof HTMLCanvasElement ? o(s, a) : t.onload = () => o(s, a);
  return n;
}, import_jquery.default.fn.createGradient = function(i21) {
  const e = this;
  let t = null;
  const n = [], o = x(i21), r = e[0];
  if (!p(r)) return null;
  const s = m(r);
  if (!s) return null;
  o.x1 = o.x1 || 0, o.y1 = o.y1 || 0, o.x2 = o.x2 || 0, o.y2 = o.y2 || 0, o.r1 !== null && o.r2 !== null ? t = s.createRadialGradient(o.x1, o.y1, o.r1, o.x2, o.y2, o.r2) : t = s.createLinearGradient(o.x1, o.y1, o.x2, o.y2);
  for (let l = 1; o["c" + l] !== void 0; l += 1) o["s" + l] !== void 0 ? n.push(o["s" + l]) : n.push(null);
  const a = n.length;
  n[0] === null && (n[0] = 0), n[a - 1] === null && (n[a - 1] = 1);
  for (let l = 0; l < a; l += 1) {
    let u = 0, f = null, c = null, d = 1;
    if (n[l] !== null) {
      u = 0, f = n[l];
      let g;
      for (g = l + 1; g < a; g += 1) if (n[g] !== null) {
        c = n[g];
        break;
      } else d += 1;
      f > c && (n[g] = n[l]);
    } else n[l] === null && (u += 1, n[l] = f + u * ((c - f) / d));
    const y = n[l];
    y !== null && t.addColorStop(y, o["c" + (l + 1)]);
  }
  return t;
}, import_jquery.default.fn.setPixels = function i20(e) {
  const t = this;
  for (let n = 0; n < t.length; n += 1) {
    const o = t[n];
    if (!p(o)) continue;
    const r = m(o), s = v(o);
    if (!r) continue;
    const a = x(e);
    if (w(o, a, e, i20), L(o, r, a, a.width, a.height), (a.width === null || a.height === null) && (a.width = o.width, a.height = o.height, a.x = a.width / 2, a.y = a.height / 2), a.width !== 0 && a.height !== 0) {
      const l = r.getImageData((a.x - a.width / 2) * s.pixelRatio, (a.y - a.height / 2) * s.pixelRatio, a.width * s.pixelRatio, a.height * s.pixelRatio), u = l.data, f = u.length;
      if (a.each) for (let c = 0; c < f; c += 4) {
        const d = { r: u[c], g: u[c + 1], b: u[c + 2], a: u[c + 3] };
        a.each.call(o, d, a), u[c] = d.r, u[c + 1] = d.g, u[c + 2] = d.b, u[c + 3] = d.a;
      }
      r.putImageData(l, (a.x - a.width / 2) * s.pixelRatio, (a.y - a.height / 2) * s.pixelRatio), r.restore();
    }
  }
  return t;
}, import_jquery.default.fn.getCanvasImage = function(i21, e) {
  const t = this;
  if (t.length !== 0) {
    const n = t[0];
    return p(n) ? (e === void 0 && (e = 1), n.toDataURL("image/" + i21, e)) : null;
  }
  return null;
}, import_jquery.default.fn.detectPixelRatio = function(i21) {
  const e = this;
  for (let t = 0; t < e.length; t += 1) {
    const n = e[t];
    if (!p(n)) continue;
    const o = m(n);
    if (!o) continue;
    const r = v(n);
    if (!r.scaled) {
      const s = window.devicePixelRatio || 1;
      if (s !== 1) {
        const a = n.width, l = n.height;
        n.width = a * s, n.height = l * s, n.style.width = a + "px", n.style.height = l + "px", o.scale(s, s);
      }
      r.pixelRatio = s, r.scaled = true, i21 && i21.call(n, s);
    }
  }
  return e;
}, Y.clearCache = function() {
  for (const i21 in X) Object.prototype.hasOwnProperty.call(X, i21) && (X[i21] = {});
}, A(Y, { defaults: K, setGlobalProps: k, transformShape: L, detectEvents: R, closePath: O, setCanvasFont: ot, measureText: st }), import_jquery.default.jCanvas = Y, import_jquery.default.jCanvasObject = I;
//# sourceMappingURL=jcanvas.js.map
